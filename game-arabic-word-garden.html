<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª | Ø³Ù…Ø§Ø±Øª ÙƒÙŠØ¯Ø²</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Ù„Ø¹Ø¨Ø© Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¨Ø§Ù„ØµÙˆØ± Ù„ØªØ·ÙˆÙŠØ± Ù…ÙØ±Ø¯Ø§Øª Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
    :root {
      --primary: #FF9E1F;
      --primary-dark: #E88A0D;
      --primary-light: #FFD699;
      --secondary: #4A90E2;
      --secondary-light: #8EC0F0;
      --accent: #FF6B6B;
      --dark: #2D3748;
      --light: #F7FAFC;
      --white: #FFFFFF;
      --gray-light: #E2E8F0;
      --gray: #A0AEC0;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.12);
      --radius: 16px;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Tajawal', sans-serif;
      background-color: var(--light);
      color: var(--dark);
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ - Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
    .navbar {
      background: var(--white);
      border-radius: var(--radius);
      margin: 1rem auto;
      max-width: min(1200px, 94vw);
      box-shadow: var(--shadow);
      padding: 0.8rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 10px;
      z-index: 100;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      text-decoration: none;
      color: var(--dark);
      font-weight: 700;
      font-size: 1.4rem;
    }

    .brand span:first-child {
      font-size: 2rem;
    }

    .back-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--primary);
      color: white;
      padding: 0.8rem 1.5rem;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 700;
      transition: var(--transition);
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(255, 158, 31, 0.3);
    }

    .back-button:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(255, 158, 31, 0.4);
    }

    /* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù„Ø¹Ø¨Ø© */
    .game-container {
      max-width: min(1200px, 94vw);
      margin: 0 auto;
      padding: 1.5rem 0;
      flex: 1;
    }

    .game-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .game-title {
      color: var(--dark);
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .game-title span {
      color: var(--primary);
    }

    .game-subtitle {
      color: var(--dark);
      opacity: 0.8;
      max-width: 600px;
      margin: 0 auto;
      font-size: 1.1rem;
    }

    /* Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª */
    .game-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .info-card {
      background: var(--white);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow);
      text-align: center;
      transition: var(--transition);
    }

    .info-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }

    .info-label {
      font-size: 0.9rem;
      color: var(--dark);
      opacity: 0.8;
      margin-bottom: 0.5rem;
    }

    .info-value {
      font-size: 2rem;
      color: var(--primary);
      font-weight: 700;
    }

    .progress-bar {
      height: 8px;
      background-color: var(--gray-light);
      border-radius: 4px;
      margin-top: 0.5rem;
      overflow: hidden;
    }

    .progress {
      height: 100%;
      background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© */
    .game-area {
      background: var(--white);
      border-radius: var(--radius);
      padding: 2rem;
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
    }

    .current-word-container {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 2rem;
      text-align: center;
      box-shadow: var(--shadow);
    }

    .current-word-label {
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }

    .current-word {
      color: white;
      font-size: 2.5rem;
      font-weight: bold;
    }

    .images-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2.5rem;
    }

    .image-card {
      background-color: var(--light);
      border-radius: var(--radius);
      overflow: hidden;
      cursor: pointer;
      transition: var(--transition);
      border: 3px solid transparent;
      text-align: center;
      box-shadow: var(--shadow);
    }

    .image-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }

    .image-card.selected {
      border-color: var(--primary);
      box-shadow: 0 5px 15px rgba(255, 158, 31, 0.3);
    }

    .image-card.wrong {
      border-color: var(--accent);
    }

    .emoji-display {
      font-size: 5rem;
      padding: 1.5rem 0;
      background-color: white;
    }

    .image-card p {
      padding: 1rem;
      font-weight: bold;
      color: var(--dark);
      background-color: white;
      border-top: 1px solid var(--gray-light);
    }

    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
    .controls {
      display: flex;
      justify-content: center;
      gap: 1.2rem;
      flex-wrap: wrap;
    }

    .btn {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 50px;
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition);
      font-weight: 700;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      text-decoration: none;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
      box-shadow: 0 4px 10px rgba(255, 158, 31, 0.3);
    }

    .btn-primary:hover:not(:disabled) {
      background: var(--primary-dark);
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(255, 158, 31, 0.4);
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .btn-secondary:hover:not(:disabled) {
      background: var(--primary-light);
      transform: translateY(-3px);
    }

    .btn:disabled {
      background-color: var(--gray-light);
      color: var(--gray);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
      border: none;
    }

    /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© */
    .feedback {
      text-align: center;
      margin-top: 1.5rem;
      min-height: 40px;
      font-weight: bold;
      font-size: 1.1rem;
      padding: 0.8rem;
      border-radius: 8px;
      transition: var(--transition);
    }

    .feedback.correct {
      color: var(--primary);
      background-color: rgba(255, 158, 31, 0.1);
      border: 1px solid rgba(255, 158, 31, 0.3);
    }

    .feedback.wrong {
      color: var(--accent);
      background-color: rgba(255, 107, 107, 0.1);
      border: 1px solid rgba(255, 107, 107, 0.3);
    }

    /* Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
    .results-screen {
      background: var(--white);
      border-radius: var(--radius);
      padding: 3rem;
      text-align: center;
      box-shadow: var(--shadow);
      display: none;
      margin-bottom: 2rem;
    }

    .results-title {
      color: var(--dark);
      margin-bottom: 1.5rem;
      font-size: 2.2rem;
    }

    .score-display {
      font-size: 4rem;
      color: var(--primary);
      margin: 1.5rem 0;
      font-weight: bold;
    }

    .stars {
      font-size: 3.5rem;
      margin: 1.5rem 0;
      color: var(--primary);
    }

    .result-message {
      font-size: 1.3rem;
      color: var(--dark);
      opacity: 0.8;
      margin-bottom: 2.5rem;
      line-height: 1.6;
    }

    /* ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© */
    .footer {
      text-align: center;
      padding: 2rem;
      color: var(--dark);
      opacity: 0.7;
      border-top: 1px solid var(--gray-light);
      margin-top: 4rem;
    }

    /* Ø²Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ */
    .ai-assistant {
      position: fixed;
      bottom: 30px;
      left: 30px;
      z-index: 1000;
    }

    .ai-button {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: none;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      color: white;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .ai-button::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255,255,255,0.2), transparent);
      border-radius: 50%;
    }

    .ai-button:hover {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    .ai-button.pulse {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(255, 158, 31, 0.7);
      }
      70% {
        box-shadow: 0 0 0 15px rgba(255, 158, 31, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(255, 158, 31, 0);
      }
    }

    .ai-tooltip {
      position: absolute;
      bottom: 85px;
      left: 0;
      background: var(--white);
      color: var(--dark);
      padding: 0.8rem 1.2rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
      width: 200px;
      text-align: center;
      font-weight: 500;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
      transform: translateY(10px);
    }

    .ai-tooltip::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 10px solid transparent;
      border-top-color: var(--white);
    }

    .ai-button:hover + .ai-tooltip {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
    .ai-chat {
      position: fixed;
      bottom: 120px;
      left: 30px;
      width: 350px;
      height: 450px;
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
      z-index: 1001;
      display: none;
      flex-direction: column;
      overflow: hidden;
    }

    .ai-chat.active {
      display: flex;
    }

    .chat-header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .chat-header h3 {
      margin: 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .close-chat {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .close-chat:hover {
      transform: scale(1.2);
    }

    .chat-body {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .message {
      max-width: 80%;
      padding: 0.8rem 1rem;
      border-radius: 1.2rem;
      line-height: 1.5;
    }

    .ai-message {
      background: var(--light);
      color: var(--dark);
      align-self: flex-start;
      border-bottom-right-radius: 0.2rem;
    }

    .user-message {
      background: var(--primary-light);
      color: var(--dark);
      align-self: flex-end;
      border-bottom-left-radius: 0.2rem;
    }

    .chat-footer {
      padding: 1rem;
      border-top: 1px solid var(--gray-light);
      display: flex;
      gap: 0.5rem;
    }

    .chat-input {
      flex: 1;
      padding: 0.8rem 1rem;
      border: 1px solid var(--gray-light);
      border-radius: 50px;
      font-family: inherit;
      outline: none;
      transition: var(--transition);
    }

    .chat-input:focus {
      border-color: var(--primary);
    }

    .send-button {
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 50%;
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
    }

    .send-button:hover {
      background: var(--primary-dark);
      transform: scale(1.05);
    }

    /* Ø§Ù„ØªÙƒÙŠÙ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
    @media (max-width: 768px) {
      .navbar {
        flex-direction: column;
        gap: 1rem;
        padding: 1rem;
      }
      
      .game-title {
        font-size: 2rem;
      }
      
      .game-subtitle {
        font-size: 1rem;
      }
      
      .images-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .controls {
        flex-direction: column;
      }
      
      .game-area {
        padding: 1.5rem;
      }
      
      .results-screen {
        padding: 2rem;
      }
      
      .ai-chat {
        width: 300px;
        height: 400px;
        left: 20px;
        bottom: 110px;
      }
    }
    
    @media (max-width: 480px) {
      .ai-assistant {
        bottom: 20px;
        left: 20px;
      }
      
      .ai-button {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
      }
      
      .ai-chat {
        width: calc(100vw - 40px);
        left: 20px;
        right: 20px;
      }
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .pulse {
      animation: pulse 0.5s ease;
    }
  </style>
</head>
<body>
  <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
  <header class="navbar">
    <a class="brand" href="index.html" aria-label="Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
      <span>ğŸŒŸ</span>
      <span>Ø³Ù…Ø§Ø±Øª ÙƒÙŠØ¯Ø²</span>
    </a>
    <a href="games.html" class="back-button">
      <span>â†</span>
      <span>Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù…Ø±ÙƒØ² Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</span>
    </a>
  </header>

  <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù„Ø¹Ø¨Ø© -->
  <main class="game-container">
    <div class="game-header">
      <h1 class="game-title">Ø­Ø¯ÙŠÙ‚Ø© <span>Ø§Ù„ÙƒÙ„Ù…Ø§Øª</span></h1>
      <p class="game-subtitle">Ø§Ø·Ø§Ø¨Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø© Ù…Ø¹ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‚Ø¨Ù„ Ø£Ù† ØªØ°Ø¨Ù„ Ø§Ù„Ø£Ø²Ù‡Ø§Ø±! Ø§Ù„Ø¹Ø¨ ÙˆØªØ¹Ù„Ù… Ù…Ø¹ Ø³Ù…Ø§Ø±Øª ÙƒÙŠØ¯Ø²</p>
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
    <div class="game-info">
      <div class="info-card">
        <div class="info-label">Ø§Ù„Ù†ØªÙŠØ¬Ø©</div>
        <div class="info-value" id="score">0</div>
        <div class="progress-bar">
          <div class="progress" id="score-progress" style="width: 0%"></div>
        </div>
      </div>
      <div class="info-card">
        <div class="info-label">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</div>
        <div class="info-value" id="timer">60</div>
        <div class="progress-bar">
          <div class="progress" id="timer-progress" style="width: 100%"></div>
        </div>
      </div>
      <div class="info-card">
        <div class="info-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</div>
        <div class="info-value" id="level">1</div>
        <div class="progress-bar">
          <div class="progress" id="level-progress" style="width: 0%"></div>
        </div>
      </div>
    </div>

    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
    <div class="game-area" id="game-area">
      <div class="current-word-container">
        <div class="current-word-label">Ø§Ø®ØªØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„ÙƒÙ„Ù…Ø©:</div>
        <div class="current-word" id="current-word">...</div>
      </div>
      
      <div class="images-grid" id="images-grid">
        <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ± Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
      </div>
      
      <div class="controls">
        <button class="btn btn-primary" id="check-btn" disabled>
          <span>âœ“</span>
          <span>ØªØ­Ù‚Ù‚</span>
        </button>
        <button class="btn btn-secondary" id="next-btn" disabled>
          <span>â†’</span>
          <span>Ø§Ù„ØªØ§Ù„ÙŠ</span>
        </button>
      </div>
      
      <div class="feedback" id="feedback"></div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <div class="results-screen" id="results-screen">
      <h2 class="results-title">ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h2>
      <div class="score-display" id="final-score">0</div>
      <div class="stars" id="stars">â˜…â˜…â˜…</div>
      <p class="result-message" id="result-message">Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹! ÙˆØ§ØµÙ„ Ø§Ù„ØªÙ‚Ø¯Ù…</p>
      <div class="controls">
        <button class="btn btn-primary" id="play-again-btn">
          <span>ğŸ”„</span>
          <span>Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</span>
        </button>
        <a href="games.html" class="btn btn-secondary">
          <span>ğŸ </span>
          <span>Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù…Ø±ÙƒØ² Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</span>
        </a>
      </div>
    </div>
  </main>

  <!-- ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© -->
  <footer class="footer">
    Â© <span id="year"></span> Ù…Ù†ØµØ© Ø³Ù…Ø§Ø±Øª ÙƒÙŠØ¯Ø² Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© â€¢ ØµÙÙ…Ù‘Ù…Øª Ù„ØªØ¬Ø¹Ù„ Ø§Ù„ØªØ¹Ù„Ù… Ù…Ù…ØªØ¹Ù‹Ø§ ÙˆØ¢Ù…Ù†Ù‹Ø§ Ù„Ù„Ø£Ø·ÙØ§Ù„ ÙÙŠ Ø±ÙŠØ§Ø¶ Ø§Ù„Ø£Ø·ÙØ§Ù„.
  </footer>

  <!-- Ø²Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ -->
  <div class="ai-assistant">
    <button class="ai-button pulse">ğŸ¤–</button>
    <div class="ai-tooltip">Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ø£ÙŠ Ø´ÙŠØ¡!</div>
    
    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
    <div class="ai-chat">
      <div class="chat-header">
        <h3><span>ğŸ¤–</span> Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h3>
        <button class="close-chat">Ã—</button>
      </div>
      <div class="chat-body">
        <div class="message ai-message">
          Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø³Ù…Ø§Ø±Øª ÙƒÙŠØ¯Ø². ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ
        </div>
      </div>
      <div class="chat-footer">
        <input type="text" class="chat-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...">
        <button class="send-button">â¤</button>
      </div>
    </div>
  </div>

  <script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© - Ø§Ù„ÙƒÙ„Ù…Ø§Øª ÙˆØ§Ù„ØµÙˆØ± Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø© Ù„Ù‡Ø§
    const gameData = [
      {
        word: "ØªÙØ§Ø­Ø©",
        image: "ğŸ",
        options: ["ğŸ", "ğŸŒ", "ğŸŠ", "ğŸ“"]
      },
      {
        word: "Ù‚Ø·Ø©",
        image: "ğŸ±",
        options: ["ğŸ¶", "ğŸ±", "ğŸ­", "ğŸ¹"]
      },
      {
        word: "Ø³ÙŠØ§Ø±Ø©",
        image: "ğŸš—",
        options: ["ğŸš—", "ğŸš²", "ğŸš‚", "ğŸš€"]
      },
      {
        word: "Ù…Ù†Ø²Ù„",
        image: "ğŸ ",
        options: ["ğŸ ", "ğŸ¢", "ğŸ­", "ğŸ›ï¸"]
      },
      {
        word: "Ø´Ù…Ø³",
        image: "â˜€ï¸",
        options: ["â˜€ï¸", "ğŸŒ™", "â­", "â˜ï¸"]
      },
      {
        word: "Ø²Ù‡Ø±Ø©",
        image: "ğŸŒº",
        options: ["ğŸŒº", "ğŸŒ³", "ğŸŒµ", "ğŸ€"]
      },
      {
        word: "ÙƒØªØ§Ø¨",
        image: "ğŸ“š",
        options: ["ğŸ“š", "ğŸ“±", "ğŸ–¥ï¸", "ğŸ®"]
      },
      {
        word: "ÙƒØ±Ø©",
        image: "âš½",
        options: ["âš½", "ğŸ€", "ğŸ¾", "ğŸ¯"]
      },
      {
        word: "Ù‚Ù„Ù…",
        image: "âœï¸",
        options: ["âœï¸", "ğŸ“", "ğŸ“", "ğŸ–Šï¸"]
      },
      {
        word: "Ø´Ø¬Ø±Ø©",
        image: "ğŸŒ³",
        options: ["ğŸŒ³", "ğŸŒ´", "ğŸŒ²", "ğŸƒ"]
      }
    ];

    // Ø¹Ù†Ø§ØµØ± DOM
    const currentWordElement = document.getElementById('current-word');
    const imagesGridElement = document.getElementById('images-grid');
    const scoreElement = document.getElementById('score');
    const timerElement = document.getElementById('timer');
    const levelElement = document.getElementById('level');
    const checkButton = document.getElementById('check-btn');
    const nextButton = document.getElementById('next-btn');
    const feedbackElement = document.getElementById('feedback');
    const gameAreaElement = document.getElementById('game-area');
    const resultsScreenElement = document.getElementById('results-screen');
    const finalScoreElement = document.getElementById('final-score');
    const starsElement = document.getElementById('stars');
    const resultMessageElement = document.getElementById('result-message');
    const playAgainButton = document.getElementById('play-again-btn');
    const scoreProgressElement = document.getElementById('score-progress');
    const timerProgressElement = document.getElementById('timer-progress');
    const levelProgressElement = document.getElementById('level-progress');

    // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
    let score = 0;
    let currentLevel = 1;
    let timeLeft = 60;
    let currentQuestionIndex = 0;
    let selectedImage = null;
    let timerInterval;
    let maxScore = gameData.length * 10;

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
    function initGame() {
      score = 0;
      currentLevel = 1;
      timeLeft = 60;
      currentQuestionIndex = 0;
      
      updateScore();
      updateLevel();
      updateTimer();
      loadQuestion();
      startTimer();
      
      gameAreaElement.style.display = 'block';
      resultsScreenElement.style.display = 'none';
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
    function loadQuestion() {
      if (currentQuestionIndex >= gameData.length) {
        endGame();
        return;
      }
      
      const currentQuestion = gameData[currentQuestionIndex];
      currentWordElement.textContent = currentQuestion.word;
      
      // Ù…Ø³Ø­ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
      imagesGridElement.innerHTML = '';
      
      // Ø®Ù„Ø· Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
      const shuffledOptions = [...currentQuestion.options].sort(() => Math.random() - 0.5);
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø¨ÙƒØ©
      shuffledOptions.forEach(option => {
        const imageCard = document.createElement('div');
        imageCard.className = 'image-card';
        imageCard.innerHTML = `
          <div class="emoji-display">${option}</div>
          <p>${option}</p>
        `;
        
        imageCard.addEventListener('click', () => selectImage(imageCard, option));
        imagesGridElement.appendChild(imageCard);
      });
      
      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø±
      checkButton.disabled = true;
      nextButton.disabled = true;
      feedbackElement.textContent = '';
      feedbackElement.className = 'feedback';
      selectedImage = null;
    }

    // Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©
    function selectImage(imageCard, image) {
      // Ø¥Ù„ØºØ§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
      const previouslySelected = document.querySelector('.image-card.selected');
      if (previouslySelected) {
        previouslySelected.classList.remove('selected');
      }
      
      // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      imageCard.classList.add('selected');
      selectedImage = image;
      checkButton.disabled = false;
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
    function checkAnswer() {
      if (!selectedImage) return;
      
      const currentQuestion = gameData[currentQuestionIndex];
      const isCorrect = selectedImage === currentQuestion.image;
      
      if (isCorrect) {
        // Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
        score += 10;
        updateScore();
        feedbackElement.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†Øª! ğŸŒŸ';
        feedbackElement.className = 'feedback correct';
        
        // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆÙ‚Øª Ù„Ù„Ù…ÙƒØ§ÙØ£Ø©
        timeLeft = Math.min(60, timeLeft + 5);
        updateTimer();
        
        // ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ø¨Ø¶
        document.querySelector('.image-card.selected').classList.add('pulse');
      } else {
        // Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©
        feedbackElement.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
        feedbackElement.className = 'feedback wrong';
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
        const imageCards = document.querySelectorAll('.image-card');
        imageCards.forEach(card => {
          if (card.querySelector('.emoji-display').textContent === currentQuestion.image) {
            card.classList.add('selected');
          }
        });
        
        // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª ÙƒØ¹Ù‚ÙˆØ¨Ø©
        timeLeft = Math.max(0, timeLeft - 5);
        updateTimer();
      }
      
      checkButton.disabled = true;
      nextButton.disabled = false;
    }

    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
    function nextQuestion() {
      currentQuestionIndex++;
      
      // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
      if (currentQuestionIndex % 3 === 0 && currentLevel < 3) {
        currentLevel++;
        updateLevel();
      }
      
      loadQuestion();
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
    function startTimer() {
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        timeLeft--;
        updateTimer();
        
        if (timeLeft <= 0) {
          endGame();
        }
      }, 1000);
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¤Ù‚Øª
    function updateTimer() {
      timerElement.textContent = timeLeft;
      timerProgressElement.style.width = `${(timeLeft / 60) * 100}%`;
      
      // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù…Ø¤Ù‚Øª Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ‚Ù„ Ø§Ù„ÙˆÙ‚Øª
      if (timeLeft <= 10) {
        timerElement.style.color = '#f44336';
      } else if (timeLeft <= 30) {
        timerElement.style.color = '#ff9800';
      } else {
        timerElement.style.color = '#FF9E1F';
      }
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªÙŠØ¬Ø©
    function updateScore() {
      scoreElement.textContent = score;
      scoreProgressElement.style.width = `${(score / maxScore) * 100}%`;
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªÙˆÙ‰
    function updateLevel() {
      levelElement.textContent = currentLevel;
      levelProgressElement.style.width = `${(currentQuestionIndex / gameData.length) * 100}%`;
    }

    // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
    function endGame() {
      clearInterval(timerInterval);
      
      gameAreaElement.style.display = 'none';
      resultsScreenElement.style.display = 'block';
      
      finalScoreElement.textContent = score;
      
      // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Ø¬ÙˆÙ… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªÙŠØ¬Ø©
      let stars = '';
      let message = '';
      
      if (score >= 80) {
        stars = 'â˜…â˜…â˜…â˜…â˜…';
        message = 'Ø£Ø¯Ø§Ø¡ Ù…ØªÙ…ÙŠØ²! Ø£Ù†Øª Ø¨Ø·Ù„ Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª!';
      } else if (score >= 60) {
        stars = 'â˜…â˜…â˜…â˜…';
        message = 'Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹! ÙˆØ§ØµÙ„ Ø§Ù„ØªÙ‚Ø¯Ù…!';
      } else if (score >= 40) {
        stars = 'â˜…â˜…â˜…';
        message = 'Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø§Ù„Ø£ÙØ¶Ù„!';
      } else if (score >= 20) {
        stars = 'â˜…â˜…';
        message = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ Ø£ÙØ¶Ù„!';
      } else {
        stars = 'â˜…';
        message = 'Ù„Ø§ ØªØ³ØªØ³Ù„Ù…! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!';
      }
      
      starsElement.textContent = stars;
      resultMessageElement.textContent = message;
    }

    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    checkButton.addEventListener('click', checkAnswer);
    nextButton.addEventListener('click', nextQuestion);
    playAgainButton.addEventListener('click', initGame);

    // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('load', initGame);

    // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ
    const aiButton = document.querySelector('.ai-button');
    const aiChat = document.querySelector('.ai-chat');
    const closeChat = document.querySelector('.close-chat');
    const sendButton = document.querySelector('.send-button');
    const chatInput = document.querySelector('.chat-input');
    const chatBody = document.querySelector('.chat-body');
    
    aiButton.addEventListener('click', () => {
      aiChat.classList.toggle('active');
    });
    
    closeChat.addEventListener('click', () => {
      aiChat.classList.remove('active');
    });
    
    function addMessage(text, isUser = false) {
      const messageDiv = document.createElement('div');
      messageDiv.classList.add('message');
      messageDiv.classList.add(isUser ? 'user-message' : 'ai-message');
      messageDiv.textContent = text;
      chatBody.appendChild(messageDiv);
      chatBody.scrollTop = chatBody.scrollHeight;
    }
    
    sendButton.addEventListener('click', () => {
      const message = chatInput.value.trim();
      if (message) {
        addMessage(message, true);
        chatInput.value = '';
        
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø±Ø¯ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯
        setTimeout(() => {
          const responses = [
            "Ù‡Ø°Ø§ Ø³Ø¤Ø§Ù„ Ø±Ø§Ø¦Ø¹! ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø°Ù„Ùƒ.",
            "Ø£ÙÙ‡Ù… Ù…Ø§ ØªÙ‚ØµØ¯Ù‡. Ø¯Ø¹Ù†ÙŠ Ø£Ù‚Ø¯Ù… Ù„Ùƒ Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙÙŠØ¯Ø©.",
            "Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ! Ø¥Ù„ÙŠÙƒ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØªÙŠ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡Ø§.",
            "Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ. Ù‡Ù„ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„ØŸ"
          ];
          const randomResponse = responses[Math.floor(Math.random() * responses.length)];
          addMessage(randomResponse);
        }, 1000);
      }
    });
    
    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendButton.click();
      }
    });

    // ØªØ­Ø¯ÙŠØ« Ø³Ù†Ø© Ø§Ù„ØªØ°ÙŠÙŠÙ„
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
  <!-- Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© -->
  <style>
    .return-button {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: linear-gradient(135deg, #e8822a, #ff9d45);
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 50px;
      font-size: 16px;
      font-weight: bold;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      border: 2px solid #ffb366;
    }
    
    .return-button:hover {
      background: linear-gradient(135deg, #ff9d45, #e8822a);
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 6px 8px rgba(0,0,0,0.15);
    }
    
    .return-button:active {
      transform: translateY(0);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    @media (max-width: 768px) {
      .return-button {
        bottom: 20px;
        right: 20px;
        padding: 10px 20px;
        font-size: 14px;
      }
    }
  </style>
  <a href="javascript:history.back()" class="return-button">â† Ø¹ÙˆØ¯Ø©</a>
  <script>
    (function(){
      function getFallbackUrl(){
        const path = location.pathname.toLowerCase();
        if (path.includes('game-arabic-letters') || path.includes('game-math-shape-lab') || path.includes('game-english-color-explorer')) {
          return 'games-kg1.html';
        }
        if (path.includes('game-arabic-word-garden') || path.includes('game-math-number-race') || path.includes('game-english-word-trail')) {
          return 'games-kg2.html';
        }
        if (path.includes('games-kg1')) return 'stages.html';
        if (path.includes('games-kg2')) return 'stages.html';
        if (path.includes('games.html')) return 'index.html';
        if (path.includes('dashboard')) return 'stages.html';
        if (path.includes('stages')) return 'index.html';
        return 'index.html';
      }
      function handleBack(){
        if (document.referrer && document.referrer !== location.href) {
          window.history.back();
        } else {
          window.location.href = getFallbackUrl();
        }
      }
      const btn=document.createElement('button');
      btn.textContent='â† Ø±Ø¬ÙˆØ¹';
      btn.style.cssText='position:fixed;top:20px;left:20px;z-index:1000;background:linear-gradient(135deg,#e8822a,#ff9d45);color:#fff;border:none;padding:10px 16px;border-radius:12px;font-weight:700;font-family:Tajawal,sans-serif;box-shadow:0 4px 10px rgba(0,0,0,0.2);cursor:pointer;';
      btn.addEventListener('click',handleBack);
      document.addEventListener('DOMContentLoaded',function(){ document.body.appendChild(btn);});
    })();
  </script>
</body>
</html>